<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Asthma Kids Care</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-messaging.js"></script>
</head>
<body>

    <div class="theme-switcher">
        <div class="theme-btn t-luxury" onclick="setTheme('theme-luxury')"></div>
        <div class="theme-btn t-ocean" onclick="setTheme('theme-ocean')"></div>
        <div class="theme-btn t-urban" onclick="setTheme('theme-urban')"></div>
    </div>

    <div id="page-home" class="page-section active">
        <div class="hero-banner">
            <h1>Asthma Care</h1>
            <p>‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡∏î‡∏π‡πÅ‡∏•‡∏•‡∏π‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ ‡∏´‡πà‡∏≤‡∏á‡πÑ‡∏Å‡∏•‡∏´‡∏≠‡∏ö‡∏´‡∏∑‡∏î</p>
            <img src="https://cdn-icons-png.flaticon.com/512/3063/3063822.png" alt="Logo">
        </div>
        
        <div class="container install-guide">
            <h3>üì≤ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏•‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</h3>
            
            <div id="ios-guide" class="guide-box hidden">
                <p><strong>‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö iPhone / iPad</strong></p>
                <ol>
                    <li>‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡πÅ‡∏ä‡∏£‡πå" <i class='bx bx-share'></i> ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á Safari</li>
                    <li>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π "‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÇ‡∏Æ‡∏°" <br>(Add to Home Screen)</li>
                </ol>
            </div>

            <div id="android-guide" class="guide-box">
                <p><strong>‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Android</strong></p>
                <p>‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏≠‡∏û‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</p>
                <button id="btn-install" class="btn-primary" onclick="installPWA()">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÅ‡∏≠‡∏û</button>
            </div>

            <hr>
            <h3>üìñ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h3>
            <ul class="how-to-list">
                <li><i class='bx bx-user-plus'></i> ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÄ‡∏°‡∏ô‡∏π "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</li>
                <li><i class='bx bx-alarm'></i> ‡∏£‡∏≠‡∏£‡∏±‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô (06:00 ‡πÅ‡∏•‡∏∞ 18:00)</li>
                <li><i class='bx bx-check-circle'></i> ‡∏Å‡∏î‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏û‡πà‡∏ô‡∏¢‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∞‡∏™‡∏°‡πÅ‡∏ï‡πâ‡∏°</li>
            </ul>
        </div>
    </div>

    <div id="page-record" class="page-section">
        
        <div id="view-register" class="container hidden">
            <h2>üìù ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</h2>
            <form id="form-register">
                <input type="text" id="reg-parent" placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏• ‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á" required>
                <input type="tel" id="reg-phone" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå" required>
                <input type="text" id="reg-patient" placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏• ‡∏Ñ‡∏ô‡πÑ‡∏Ç‡πâ" required>
                <input type="text" id="reg-hn" placeholder="HN ‡∏Ñ‡∏ô‡πÑ‡∏Ç‡πâ" required>
                <label>‡∏¢‡∏≤‡∏û‡πà‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß:</label>
                <select id="reg-med" onchange="updateMedImage()" required>
                    <option value="Ventolin">Ventolin</option>
                    <option value="Pulmicort">Pulmicort</option>
                    <option value="Seretide">Seretide</option>
                </select>
                <div class="med-preview"><img id="med-img-preview" src=""></div>
                <textarea id="reg-note" placeholder="Note ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°"></textarea>
                <button type="submit" class="btn-primary">‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</button>
            </form>
            <p class="text-center" style="margin-top:15px;">
                ‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏•‡πâ‡∏ß? <a href="#" onclick="showLogin()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a>
            </p>
        </div>

        <div id="view-login" class="container hidden">
            <h2>üîë ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h2>
            <input type="text" id="login-hn" placeholder="‡∏Å‡∏£‡∏≠‡∏Å HN ‡∏Ñ‡∏ô‡πÑ‡∏Ç‡πâ">
            <button onclick="login()" class="btn-primary">‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</button>
            <button onclick="showRegister()" class="btn-secondary">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</button>
        </div>

        <div id="view-dashboard" class="container hidden">
            <div class="header-card">
                <h3>‡∏ô‡πâ‡∏≠‡∏á <span id="display-name">...</span></h3>
                <small>HN: <span id="display-hn">...</span></small>
            </div>
            <div class="med-card">
                <img id="display-med-img" src="">
                <div>
                    <h4>‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ:</h4>
                    <p id="display-med-name" class="med-name">...</p>
                </div>
            </div>
            <div class="action-card">
                <h3>üïë ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏û‡πà‡∏ô‡∏¢‡∏≤</h3>
                <p>‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: <span id="current-time">--:--</span></p>
                <input type="text" id="log-symptom" placeholder="‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)">
                <button onclick="submitLog()" class="btn-success">‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏û‡πà‡∏ô‡∏¢‡∏≤‡πÅ‡∏•‡πâ‡∏ß</button>
            </div>
            <div class="history-section">
                <h4>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏û‡πà‡∏ô‡∏¢‡∏≤‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h4>
                <ul id="history-list"><li>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</li></ul>
            </div>
            <button onclick="logout()" class="btn-secondary" style="margin-top:20px;">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
        </div>
    </div>

    <div id="page-admin" class="page-section">
        
        <div id="view-admin-login" class="container">
            <h2 class="text-center">üõ°Ô∏è Admin Access</h2>
            <input type="password" id="admin-pass" placeholder="Password (‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô)">
            <button onclick="checkAdmin()" class="btn-primary">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
        </div>

        <div id="view-admin-dashboard" class="container hidden" style="max-width:100%; margin-bottom: 80px;">
            <div class="admin-header">
                <h2>‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</h2>
                <button onclick="loadAdminData()" class="btn-sm">‚Üª Refresh</button>
            </div>
            
            <div class="filter-bar">
                <span class="badge red">üî¥ ‡∏Ç‡∏≤‡∏î‡∏™‡πà‡∏á > 24‡∏ä‡∏°.</span>
                <span class="badge yellow">üü° ‡∏°‡∏µ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£</span>
                <span class="badge green">üü¢ ‡∏õ‡∏Å‡∏ï‡∏¥</span>
            </div>
            
            <div id="admin-list" class="admin-grid">Loading...</div>
            <button onclick="adminLogout()" class="btn-secondary" style="margin-top:20px;">Exit Admin</button>
        </div>

        <div id="admin-modal" class="modal hidden">
            <div class="modal-content">
                <span class="close-modal" onclick="closeModal()">&times;</span>
                <h3 id="modal-title">...</h3>
                <div id="modal-body">...</div>
            </div>
        </div>
    </div>

    <nav class="bottom-nav">
        <a href="#" class="nav-item active" onclick="switchTab('page-home', this)">
            <i class='bx bx-home'></i>
            <span>‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</span>
        </a>
        <a href="#" class="nav-item" onclick="switchTab('page-record', this)">
            <i class='bx bx-plus-medical'></i>
            <span>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</span>
        </a>
        <a href="#" class="nav-item" onclick="switchTab('page-admin', this)">
            <i class='bx bx-user-pin'></i>
            <span>Admin</span>
        </a>
    </nav>

    <div id="reward-popup" class="reward-overlay hidden">
        <div class="reward-box">
            <div class="confetti">üéâ</div>
            <h2 id="reward-title">‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°!</h2>
            <p id="reward-msg">...</p>
            <p class="reward-sub">"‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏™‡πà‡πÉ‡∏à‡∏î‡∏π‡πÅ‡∏•‡∏ô‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏î‡∏µ‡∏ô‡∏∞‡∏Ñ‡∏∞"</p>
            <button onclick="closeReward()" class="btn-primary">‡∏õ‡∏¥‡∏î</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
