<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Asthma Kids Care</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-messaging.js"></script>
</head>
<body>
    <div class="theme-switcher">
        <div class="theme-btn t-luxury" onclick="setTheme('theme-luxury')"></div>
        <div class="theme-btn t-ocean" onclick="setTheme('theme-ocean')"></div>
        <div class="theme-btn t-urban" onclick="setTheme('theme-urban')"></div>
    </div>
    <div id="line-warning" class="line-overlay hidden">
        <div class="warning-box">
            <i class='bx bx-error-circle' style="font-size:3em; color:#e74c3c;"></i>
            <h3>‡πÇ‡∏õ‡∏£‡∏î‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ô Browser</h3>
            <p>‡πÅ‡∏≠‡∏û‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡∏´‡∏≤‡∏Å‡πÄ‡∏õ‡∏¥‡∏î‡∏ú‡πà‡∏≤‡∏ô LINE</p>
            <div class="instruction-arrow">üëÜ ‡∏Å‡∏î‡∏à‡∏∏‡∏î 3 ‡∏à‡∏∏‡∏î ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô <br> ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "Open in Browser"</div>
            <button onclick="closeLineWarning()" class="btn-secondary btn-sm" style="margin-top:10px;">‡∏õ‡∏¥‡∏î‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</button>
        </div>
    </div>
    <div id="page-home" class="page-section active">
        <div class="hero-banner">
            <h1>Asthma Care</h1>
            <p>‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏û‡πà‡∏ô‡∏¢‡∏≤ ‡∏´‡πà‡∏≤‡∏á‡πÑ‡∏Å‡∏•‡∏´‡∏≠‡∏ö‡∏´‡∏∑‡∏î</p>
            <img src="https://cdn-icons-png.flaticon.com/512/3063/3063822.png" alt="Logo">
        </div>
        <div class="container onboarding-card">
            <h3>üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (3 ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô)</h3>
            <div class="step-item">
                <div class="step-num">1</div>
                <div class="step-content">
                    <h4>‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏•‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</h4>
                    <p class="desc">‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</p>
                    <div id="android-install-area" class="hidden"><button id="btn-install" class="btn-primary" onclick="installPWA()"><i class='bx bxs-download'></i> ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏≠‡∏û</button></div>
                    <div id="ios-install-area" class="ios-guide hidden"><div class="ios-step"><span>1. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏ä‡∏£‡πå</span> <i class='bx bx-share'></i></div><div class="ios-step"><span>2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÇ‡∏Æ‡∏°"</span><div class="add-home-icon"><i class='bx bx-plus-square'></i> Add to Home Screen</div></div></div>
                    <div id="installed-msg" class="success-msg hidden"><i class='bx bx-check-circle'></i> ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢</div>
                </div>
            </div>
            <div class="step-item">
                <div class="step-num">2</div>
                <div class="step-content">
                    <h4>‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</h4>
                    <p class="desc">‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏û‡πà‡∏ô‡∏¢‡∏≤</p>
                    <button id="btn-allow-notify" class="btn-secondary" onclick="requestPermission()"><i class='bx bx-bell'></i> ‡∏Å‡∏î‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</button>
                    <div id="notify-msg" class="success-msg hidden"><i class='bx bx-check-circle'></i> ‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß</div>
                </div>
            </div>
            <div class="step-item">
                <div class="step-num">3</div>
                <div class="step-content">
                    <h4>‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ô‡πÑ‡∏Ç‡πâ</h4>
                    <button class="btn-primary" onclick="goToRecord()">‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô <i class='bx bx-right-arrow-alt'></i></button>
                </div>
            </div>
        </div>
    </div>
    <div id="page-record" class="page-section">
        <div id="view-register" class="container hidden">
            <h2>üìù ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</h2>
            <form id="form-register">
                <input type="text" id="reg-parent" placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏• ‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á" required>
                <input type="tel" id="reg-phone" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå" required>
                <input type="text" id="reg-patient" placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏• ‡∏Ñ‡∏ô‡πÑ‡∏Ç‡πâ" required>
                <input type="text" id="reg-hn" placeholder="HN ‡∏Ñ‡∏ô‡πÑ‡∏Ç‡πâ" required>
                <select id="reg-med" onchange="updateMedImage()" required>
                    <option value="Ventolin">Ventolin</option>
                    <option value="Pulmicort">Pulmicort</option>
                    <option value="Seretide">Seretide</option>
                </select>
                <div class="med-preview"><img id="med-img-preview" src=""></div>
                <textarea id="reg-note" placeholder="Note ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° (‡πÅ‡∏û‡πâ‡∏¢‡∏≤/‡πÇ‡∏£‡∏Ñ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß)"></textarea>
                <button type="submit" class="btn-primary">‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</button>
            </form>
            <p class="text-center"><a href="#" onclick="showLogin()">‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏•‡πâ‡∏ß? ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a></p>
        </div>
        <div id="view-login" class="container hidden">
            <h2>üîë ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h2>
            <input type="text" id="login-hn" placeholder="‡∏Å‡∏£‡∏≠‡∏Å HN ‡∏Ñ‡∏ô‡πÑ‡∏Ç‡πâ">
            <button onclick="login()" class="btn-primary">‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</button>
            <button onclick="showRegister()" class="btn-secondary">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</button>
        </div>
        <div id="view-dashboard" class="container hidden">
            <div class="header-card"><h3>‡∏ô‡πâ‡∏≠‡∏á <span id="display-name">...</span></h3><small>HN: <span id="display-hn">...</span></small></div>
            <div class="med-card"><img id="display-med-img" src=""><div><h4>‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ:</h4><p id="display-med-name" class="med-name">...</p></div></div>
            <div class="action-card"><h3>üïë ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏û‡πà‡∏ô‡∏¢‡∏≤</h3><p>‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: <span id="current-time">--:--</span></p><input type="text" id="log-symptom" placeholder="‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)"><button onclick="submitLog()" class="btn-success">‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏û‡πà‡∏ô‡∏¢‡∏≤‡πÅ‡∏•‡πâ‡∏ß</button></div>
            <div class="history-section"><h4>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h4><ul id="history-list"><li>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</li></ul></div>
            <button onclick="logout()" class="btn-secondary" style="margin-top:20px;">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
        </div>
    </div>
    <div id="page-admin" class="page-section">
        <div id="view-admin-login" class="container"><h2 class="text-center">üõ°Ô∏è Admin Access</h2><input type="password" id="admin-pass" placeholder="Password (‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô)"><button onclick="checkAdmin()" class="btn-primary">Login</button></div>
        <div id="view-admin-dashboard" class="container hidden" style="max-width:100%; margin-bottom:80px;"><div class="admin-header"><h2>‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</h2><button onclick="loadAdminData()" class="btn-sm">‚Üª Refresh</button></div><div class="filter-bar"><span class="badge red">üî¥ ‡∏Ç‡∏≤‡∏î‡∏™‡πà‡∏á > 24‡∏ä‡∏°.</span><span class="badge yellow">üü° ‡∏°‡∏µ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£</span><span class="badge green">üü¢ ‡∏õ‡∏Å‡∏ï‡∏¥</span></div><div id="admin-list" class="admin-grid">Loading...</div><button onclick="adminLogout()" class="btn-secondary" style="margin-top:20px;">Exit</button></div>
        <div id="admin-modal" class="modal hidden"><div class="modal-content"><span class="close-modal" onclick="closeModal()">&times;</span><h3 id="modal-title">...</h3><div id="modal-body">...</div></div></div>
    </div>
    <nav class="bottom-nav">
        <a href="#" class="nav-item active" onclick="switchTab('page-home', this)"><i class='bx bx-home'></i><span>‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</span></a>
        <a href="#" class="nav-item" onclick="switchTab('page-record', this)"><i class='bx bx-plus-medical'></i><span>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</span></a>
        <a href="#" class="nav-item" onclick="switchTab('page-admin', this)"><i class='bx bx-user-pin'></i><span>Admin</span></a>
    </nav>
    <div id="reward-popup" class="reward-overlay hidden"><div class="reward-box"><div class="confetti">üéâ</div><h2 id="reward-title">‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°!</h2><p id="reward-msg">...</p><button onclick="closeReward()" class="btn-primary">‡∏õ‡∏¥‡∏î</button></div></div>
    <script src="script.js"></script>
</body>
</html>
